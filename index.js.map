{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport { page, limit } from \"../main.js\";\n\nconst API_KEY = \"49472693-e26774e5dc97a1dde6aa5a0a9\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function fetchPhotos(query) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: \"true\",\n    per_page: limit,\n    page: page\n  });\n\n  try {\n    const response = await axios.get(`${BASE_URL}?${params}`);\n    return { photos: response.data.hits, totalHits: response.data.totalHits };\n  } catch (error) {\n    console.error(\"Error:\", error);\n    throw error;\n  }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst btn = document.querySelector(\".btn\");\nlet lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n\nexport function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nexport function showErrorMessage() {\n  iziToast.show({\n    title: \"Error\",\n    message: \"Sorry, there are no images matching your search query. Please try again!\",\n    position: \"topRight\",\n    color: \"red\"\n  });\n}\n\nexport function renderPhotos(photos) {\n  if (photos.length === 0) {\n    showErrorMessage();\n    return;\n  }\n\n  const markup = photos\n    .map(photo => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${photo.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${photo.webformatURL}\" alt=\"${photo.tags}\" />\n        </a>\n        <div class=\"gallery-info\">\n          <div><p>Likes</p><p>${photo.likes}</p></div>\n          <div><p>Views</p><p>${photo.views}</p></div>\n          <div><p>Comments</p><p>${photo.comments}</p></div>\n          <div><p>Downloads</p><p>${photo.downloads}</p></div>\n        </div>\n      </li>\n    `)\n    .join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh();\n\n  smoothScroll() \n}\n\nfunction smoothScroll() {\n  const firstCard = document.querySelector(\".gallery-item\");\n  if (firstCard) {\n    const cardHeight = firstCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: \"smooth\",\n    });\n  }\n}","import { fetchPhotos } from \"./js/pixabay-api.js\";\nimport { clearGallery, renderPhotos } from \"./js/render-functions.js\";\n\nexport let page = 1;\nexport let limit = 15;\nlet searchQuery = \"\";\nlet totalPages = 1;\n\nconst btn = document.querySelector(\".btn\");\nconst loader = document.querySelector(\".loader\");\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  \n  searchQuery = document.querySelector(\"input[name='search-text']\").value.trim();\n  if (!searchQuery) return;\n\n  clearGallery();\n  loader.style.display = \"inline-block\";\n  btn.style.display = \"none\";\n\n  try {\n    page = 1;\n    const response = await fetchPhotos(searchQuery, page);\n    renderPhotos(response.photos);\n    totalPages = Math.ceil(response.totalHits / limit);\n    btn.style.display = response.totalHits > limit ? \"inline-block\" : \"none\";\n  } catch (error) {\n    console.error(\"Error:\", error);\n  } finally {\n    loader.style.display = \"none\";\n  }\n}\n\ndocument.querySelector(\"form\").addEventListener(\"submit\", handleSearch);\n\nbtn.addEventListener(\"click\", async () => {\n\n  try {\n    page += 1; \n    const response = await fetchPhotos(searchQuery, page);\n    renderPhotos(response.photos);\n\n    if (page >= totalPages) {\n      iziToast.error({\n        position: \"topRight\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      btn.style.display = \"none\";\n    }\n  } catch (error) {\n    console.error(\"Error:\", error);\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchPhotos","query","params","limit","page","response","axios","error","gallery","lightbox","SimpleLightbox","clearGallery","showErrorMessage","iziToast","renderPhotos","photos","markup","photo","smoothScroll","firstCard","cardHeight","searchQuery","totalPages","btn","loader","handleSearch","event"],"mappings":"owBAGA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAO,CACvC,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKJ,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAUE,EACV,KAAMC,CACV,CAAG,EAED,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAI,GAAGP,CAAQ,IAAIG,CAAM,EAAE,EACxD,MAAO,CAAE,OAAQG,EAAS,KAAK,KAAM,UAAWA,EAAS,KAAK,UAC/D,OAAQE,EAAO,CACd,cAAQ,MAAM,SAAUA,CAAK,EACvBA,CACP,CACH,CCnBA,MAAMC,EAAU,SAAS,cAAc,UAAU,EACrC,SAAS,cAAc,MAAM,EACzC,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,EAEnF,SAASC,GAAe,CAC7BH,EAAQ,UAAY,EACtB,CAEO,SAASI,GAAmB,CACjCC,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,2EACT,SAAU,WACV,MAAO,KACX,CAAG,CACH,CAEO,SAASC,EAAaC,EAAQ,CACnC,GAAIA,EAAO,SAAW,EAAG,CACvBH,IACA,MACD,CAED,MAAMI,EAASD,EACZ,IAAIE,GAAS;AAAA;AAAA,wCAEsBA,EAAM,aAAa;AAAA,4CACfA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,gCAGlDA,EAAM,KAAK;AAAA,gCACXA,EAAM,KAAK;AAAA,mCACRA,EAAM,QAAQ;AAAA,oCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAG9C,EACA,KAAK,EAAE,EAEVT,EAAQ,mBAAmB,YAAaQ,CAAM,EAC9CP,EAAS,QAAO,EAEhBS,EAAc,CAChB,CAEA,SAASA,GAAe,CACtB,MAAMC,EAAY,SAAS,cAAc,eAAe,EACxD,GAAIA,EAAW,CACb,MAAMC,EAAaD,EAAU,sBAAqB,EAAG,OACrD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH,CCxDO,IAAIhB,EAAO,EACPD,EAAQ,GACfkB,EAAc,GACdC,EAAa,EAEjB,MAAMC,EAAM,SAAS,cAAc,MAAM,EACnCC,EAAS,SAAS,cAAc,SAAS,EAE/C,eAAeC,EAAaC,EAAO,CAIjC,GAHAA,EAAM,eAAc,EAEpBL,EAAc,SAAS,cAAc,2BAA2B,EAAE,MAAM,OACpE,EAACA,EAEL,CAAAV,IACAa,EAAO,MAAM,QAAU,eACvBD,EAAI,MAAM,QAAU,OAEpB,GAAI,CACFnB,EAAO,EACP,MAAMC,EAAW,MAAML,EAAYqB,EAAajB,CAAI,EACpDU,EAAaT,EAAS,MAAM,EAC5BiB,EAAa,KAAK,KAAKjB,EAAS,UAAYF,CAAK,EACjDoB,EAAI,MAAM,QAAUlB,EAAS,UAAYF,EAAQ,eAAiB,MACnE,OAAQI,EAAO,CACd,QAAQ,MAAM,SAAUA,CAAK,CACjC,QAAY,CACRiB,EAAO,MAAM,QAAU,MACxB,EACH,CAEA,SAAS,cAAc,MAAM,EAAE,iBAAiB,SAAUC,CAAY,EAEtEF,EAAI,iBAAiB,QAAS,SAAY,CAExC,GAAI,CACFnB,GAAQ,EACR,MAAMC,EAAW,MAAML,EAAYqB,EAAajB,CAAI,EACpDU,EAAaT,EAAS,MAAM,EAExBD,GAAQkB,IACV,SAAS,MAAM,CACb,SAAU,WACV,QAAS,4DACjB,CAAO,EACDC,EAAI,MAAM,QAAU,OAEvB,OAAQhB,EAAO,CACd,QAAQ,MAAM,SAAUA,CAAK,CAC9B,CACH,CAAC"}